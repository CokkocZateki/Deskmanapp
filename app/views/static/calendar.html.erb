<!DOCTYPE html>
<html>
<head>
<script>
$(document).ready(function() {
  var eventslist = <%= get_record %>;
  var selectedEvent;
  $('#shift-options-menu').hide()
  $('#new-shift').hide()
  $('#calendar').fullCalendar({
    eventSources: [
      {
        events: eventslist, 
        color: "black",
      }
    ],
    allDayDefault: false,
    ignoreTimezone: false,
    defaultView: 'agendaWeek',
    header: {
    center: 'month,agendaWeek',
    },
    editable: true,
    //eventClick: function() {
    //  $(this).css('border-color', 'red');
    //},
    eventMouseover: function(calEvent, jsEvent, view) {
        // change the border color just for fun
        $(this).css('border-color', 'red');

    },
    eventMouseout: function(calEvent, jsEvent, view) {
        // change the border color just for fun
        $(this).css('border-color', 'black');
        //$('#shift-options-menu').hide()

    },
    eventClick: function(calEvent, jsEvent, view) {
        // change the border color just for fun
        $(this).css('opacity', .5);
        //alert( "Event id is " + calEvent.id);
        //alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
        var menux = jsEvent.pageX - 125;
        var menuy = jsEvent.pageY - 5;
        selectedEvent = calEvent.id;
        $('#shift-options-menu').css({"top":menuy,"left":menux}).fadeIn();

    },
    dayClick: function(date, allDay, jsEvent, view) {
      //alert('Clicked on: ' + date);
      //alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
      //alert('Current view: ' + view.name);
      $('#new-shift').slideDown();
    }
  });
  $('#shift-options-menu').click(function() {
    $(this).fadeOut();
  })
  .mouseleave(function() {
    $(this).fadeOut();
  });
  
  //$('#new-shift').slideUp()

  $('#new-shift').mouseleave(function() {
    $(this).hide();
  });
  $(function() {
    $('button')
    .button()
    .click(function( event ) {
      event.preventDefault();
    });
  });
  
  $('button').click(function(event) {
    var hostname = window.location.hostname + "/shifts/";
    window.location = $(this).text().replace(/\s/g, '_');
  });

});


</script>
<style>

	body {
		margin-top: 40px;
		text-align: center;
		font-size: 14px;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		}

	#calendar {
		width: 900px;
		margin: 0 auto;
		}

  #shift-options-menu {
    position: absolute;
    top: 0;
    background-color: black;
    z-index: 100;
    display: inline-block;
  }

  #new-shift {
    position: absolute;
    background-color: white;
    border-radius: 10px;
    box-shadow: 10px 10px 2px 2px rgba(0,0,0,0.3);
    top: 50%;
    left: 50%;
    margin-left: -200px;
    margin-top: -150px;
    z-index: 101;
  }

</style>
</head>
<body>
<h1>Shift Calendar</h1> <br>
<br>
<div id='calendar'></div>
<div id='shift-options-menu'>
  <button>Sub Shift</button>
  <button>Split Shift</button>
  <button>Take This Shift</button>
  <button>Take This Shift</button>
</div>
</body>
</html>